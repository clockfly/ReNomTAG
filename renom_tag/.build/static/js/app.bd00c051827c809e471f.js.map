{"version":3,"sources":["webpack:///./src/App.vue?a5ad","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/components/header.vue?d68d","webpack:///./src/components/header.vue","webpack:///src/components/header.vue","webpack:///src/components/leftmenu.vue","webpack:///./src/components/leftmenu.vue?c58c","webpack:///./src/components/leftmenu.vue","webpack:///./src/utils.js","webpack:///src/components/imagelist.vue","webpack:///./src/components/imagelist.vue?b938","webpack:///./src/components/imagelist.vue","webpack:///src/components/navarrow.vue","webpack:///./src/components/navarrow.vue?1349","webpack:///./src/components/navarrow.vue","webpack:///src/components/tagcanvas.vue","webpack:///./src/components/tagcanvas.vue?d2f6","webpack:///./src/components/tagcanvas.vue","webpack:///./src/components/modalbox.vue?e91c","webpack:///./src/components/modalbox.vue","webpack:///src/components/tags.vue","webpack:///./src/components/tags.vue?a26c","webpack:///./src/components/tags.vue","webpack:///src/components/taggedimages.vue","webpack:///./src/components/taggedimages.vue?cfcf","webpack:///./src/components/taggedimages.vue","webpack:///src/components/taggerpage.vue","webpack:///./src/components/taggerpage.vue?63bf","webpack:///./src/components/taggerpage.vue","webpack:///./src/router/index.js","webpack:///./src/store/state.js","webpack:///./src/store/mutation.js","webpack:///./src/store/action.js","webpack:///./src/store/store.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","components_header","staticClass","aria-hidden","on","click","toggleMenuVisible","_v","_m","src_components_header","header_normalizeComponent","main_menu_visible","cur","leftmenu","components_leftmenu","class","open","closeMenu","src_components_leftmenu","leftmenu_normalizeComponent","API_SERVER","build_api_url","path","length","min","a","b","max","client_to_node","node","points","rc","getBoundingClientRect","ret","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","_ref","value","_ref2","slicedToArray_default","x","y","push","left","scrollLeft","top","scrollTop","err","return","normalize_rect","rect","_rect2","l","t","r","addEventListenerOnce","target","type","listener","useCapture","addEventListener","fn","event","removeEventListener","computed","extends_default","Object","vuex_esm","filename_max_display","_this","k","newvalue","querySelector","bottom","_dy","file","active_image_filename","IMAGE_RELOAD_MARGIN","n","IMAGE_RELOAD_AMOUNT","components_imagelist","_vm","file_list","_s","loading_message","_e","scroll","on_scroll","_l","key","selected","is_selected","src","get_image_url","data-file","$event","stopPropagation","preventDefault","select_image","src_components_imagelist","imagelist_normalizeComponent","imagelist","navarrow","get_back_name","get_fore_name","next_file","components_navarrow","on_click","dir","src_components_navarrow","navarrow_normalizeComponent","tagcanvas","on_resize","on_keyup","active_image","arrange_boxes","methods","newbox_rect","idx","label","_utils$normalize_rect","save_tags","active_boxid","_iteratorNormalCompletion2","_step2","width","height","active_image_width","active_image_height","orgwidth","orgheight","margin","ratio","_calc_image_rect","calc_image_rect","_utils$normalize_rect3","_iteratorNormalCompletion3","box","_step3","size_style","BOX_MARGIN","boxes","_iteratorNormalCompletion4","_step4","tagboxes","_calc_image_rect5","_normalize_rect","_normalize_rect2","_clean_boxes","clientY","dragfrom_x","dragfrom_y","BOX_BORDER","boxid","box_getcursor_type","currentTarget","clientX","resize","status","cursor","_calc_image_rect7","_newbox_rect","slice","diff_x","diff_y","newbox","components_tagcanvas","ref","mousedown","mousemove","on_mousemove","image_url","dragstart","on_drag_start","is_creating","style","newtag_style","tagstyle","data-boxid","on_boxclick","on_boxmousemove","is_active_box","get_box_label","img_file_name","disabled","canbesaved","src_components_tagcanvas","tagcanvas_normalizeComponent","components_modalbox","name","_t","$emit","src_components_modalbox","modalbox_normalizeComponent","shortcut","focus","components_tags","directives","rawName","expression","placeholder","domProps","input","composing","keydown","keyup","setShortcutKey","errormsg","is_valid_label","addNewLabel","data-label","show_delete_dialog","ok","delete_tags","cancel","slot","src_components_tags","tags_normalizeComponent","tags","taggedimages","image","filename","components_taggedimages","background-image","imagewidth","data-filename","boxstyles","taggerpage","taggedimages_normalizeComponent","components_taggerpage","error_status","set_error_status","src_components_taggerpage","taggerpage_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","component","store_state","files","active_image_tag_boxes","labels","tagged_images","_set_tagbox","state","payload","pri","follow","concat","toConsumableArray_default","mutation","set_loading_message","set_main_menu_visible","visible","set_file_list","set_filename_max_display","max_display","remove_image","set_active_image","set_active_boxid","new_tagbox","set_tagbox","set_tagboxes","remove_tagbox","set_activebox_label","assign_default","set_dragger","dragger","add_label","set_labels","add_tagged_image","imgs","_didIteratorError2","_iteratorError2","_iterator2","img","_callee","context","f","regenerator_default","wrap","_context","prev","sent","t0","commit","console","error","abrupt","stop","action","load_imagefile_list","asyncToGenerator_default","mark","_callee2","response","_context2","async_func","axios_default","post","data","filename_list","dispatch","load_current_image","_this2","_callee3","_context3","get","annotation","object","bndbox","xmin","right","xmax","ymin","ymax","finish","_this3","_callee4","_context4","load_label_candidates_dict","_this4","_callee5","_context5","save_annotation","_this5","_callee6","cur_filename","o","_didIteratorError3","_iteratorError3","_iterator3","_context6","source","database","size","depth","segments","objects","pose","truncated","difficult","t1","store_dict","actions","mutations","getters","getters_default","store","Store","config","productionTip","el","components","App","template"],"mappings":"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","file":"static/js/app.bd00c051827c809e471f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-162002fc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-162002fc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-162002fc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n      <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"App\"\n};\n</script>\n\n<style lang='scss'>\nbody {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color: #fff !important;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',[_c('i',{staticClass:\"fa fa-bars\",attrs:{\"id\":\"toggle-menu\",\"aria-hidden\":\"true\"},on:{\"click\":_vm.toggleMenuVisible}}),_vm._v(\" \"),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tool-name\"},[_c('span',{staticClass:\"bold\"},[_vm._v(\"ReNom\")]),_vm._v(\" TAG\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-06e8e77c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/header.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-06e8e77c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./header.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./header.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./header.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-06e8e77c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./header.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/header.vue\n// module id = null\n// module chunks = ","<template>\n  <header>\n\n    <i id='toggle-menu' class='fa fa-bars' aria-hidden='true' \n     @click='toggleMenuVisible'></i>\n    <div class=\"tool-name\"><span class=\"bold\">ReNom</span> TAG</div>\n\n  </header>\n</template>\n\n<script>\nexport default {\n  name: \"AppHeader\",\n  methods: {\n    toggleMenuVisible: function() {\n      let cur = this.$store.state.main_menu_visible;\n      this.$store.commit(\"set_main_menu_visible\", { visible: !cur });\n    }\n  }\n};\n</script>\n\n<style lang='scss'>\nheader {\n  box-sizing: border-box;\n  width: 100%;\n  height: 50px;\n  margin: 0;\n  padding: 0;\n  background-color: #1e264d;\n  display: flex;\n  align-items: center;\n  font-size: 24px;\n\n  .tool-name {\n    box-sizing: border-box;\n    font-size: 18px;\n    .bold {\n      font-size: 18px;\n      font-weight: bold;\n    }\n  }\n\n  #toggle-menu {\n    box-sizing: border-box;\n    margin: 0 20px;\n  }\n  #toggle-menu:hover {\n    box-sizing: border-box;\n    cursor: pointer;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/header.vue","<template>\n  <div id='left-menu'  v-bind:class='{ open: main_menu_visible }' @click='closeMenu'>\n    <div class='left-menu-bar'>\n      <button class='bar-button'>\n        <i class=\"fa fa-object-group fa-fw\" aria-hidden=\"true\"></i>\n        <span class='menu-text'>Detection Label</span>\n      </button>\n\n      <button class='bar-button'>\n        <i class=\"fa fa-cog fa-fw\" aria-hidden=\"true\"></i>\n        <span class='menu-text'>Settings</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  computed: mapState([\"main_menu_visible\"]),\n  methods: {\n    closeMenu: function() {\n      this.$store.commit(\"set_main_menu_visible\", { visible: false });\n    }\n  }\n};\n</script>\n\n<style lang='scss'>\n#left-menu {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.3);\n  display: None;\n  width: 100%;\n  height: calc(100% - 50px);\n  z-index: 9999;\n  &.open {\n    width: 100%;\n    display: block;\n  }\n  .left-menu-bar {\n    background-color: #2d3e50;\n    width: 170px;\n    height: 100%;\n  }\n  .bar-button {\n    width: 100%;\n    height: 45px;\n    position: relative;\n    $bg_color: #2d3e50;\n    text-align: left;\n    margin: 0;\n    color: #b7b7b7;\n    background-color: $bg_color;\n    outline: none;\n\n    &:hover {\n      color: #fff;\n      background-color: lighten($bg_color, 15%);\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/leftmenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ open: _vm.main_menu_visible },attrs:{\"id\":\"left-menu\"},on:{\"click\":_vm.closeMenu}},[_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"left-menu-bar\"},[_c('button',{staticClass:\"bar-button\"},[_c('i',{staticClass:\"fa fa-object-group fa-fw\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),_c('span',{staticClass:\"menu-text\"},[_vm._v(\"Detection Label\")])]),_vm._v(\" \"),_c('button',{staticClass:\"bar-button\"},[_c('i',{staticClass:\"fa fa-cog fa-fw\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(\" \"),_c('span',{staticClass:\"menu-text\"},[_vm._v(\"Settings\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-134f1d3f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/leftmenu.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-134f1d3f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./leftmenu.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./leftmenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./leftmenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-134f1d3f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./leftmenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/leftmenu.vue\n// module id = null\n// module chunks = ","var API_SERVER = '' // process.env.api_server || \"\";\n\nexport function build_api_url(path) {\n  if (API_SERVER.length) {\n    return API_SERVER + path;\n  } else {\n    return path;\n  }\n}\n\nexport function min(a, b) {\n  return a < b ? a : b;\n}\n\nexport function max(a, b) {\n  return a > b ? a : b;\n}\n\nexport function client_to_node(node, points) {\n  const rc = node.getBoundingClientRect();\n  const ret = [];\n  for (let [x, y] of points) {\n    ret.push([x - rc.left + node.scrollLeft, y - rc.top + node.scrollTop]);\n  }\n  return ret;\n}\n\nexport function node_to_client(node, points) {\n  const rc = node.getBoundingClientRect();\n  const ret = [];\n  for (let [x, y] of points) {\n    ret.push([x + rc.left - node.scrollLeft, y + rc.top - node.scrollTop]);\n  }\n  return ret;\n}\n\nexport function client_to_node_rect(node, rect) {\n  const [l, t, r, b] = rect;\n  let [[nl, nt], [nr, nb]] = client_to_node(node, [[l, t], [r, b]]);\n  return [nl, nt, nr, nb];\n}\n\nexport function normalize_rect(rect) {\n  let [l, t, r, b] = rect;\n  let ret = [min(l, r), min(t, b), max(l, r), max(t, b)];\n  return ret;\n}\n\nexport function pt_in_rect(rect, x, y) {\n  const [l, t, r, b] = normalize_rect(rect);\n  return x >= l && x < r && y >= t && y < b;\n}\n\n// https://stackoverflow.com/questions/3393686/\nexport function addEventListenerOnce(target, type, listener, useCapture) {\n  function fn(event) {\n    target.removeEventListener(type, fn, useCapture);\n    listener(event);\n  }\n  target.addEventListener(type, fn, useCapture);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","<template>\n  <div id=\"imagelistblock\">\n    <div v-if='file_list.length === 0' id=msg_no_image>\n      {{loading_message}}\n    </div>\n    <div id=\"imagelist\" @scroll=\"on_scroll\">\n      <img v-for=\"file in file_list_top\" :key=\"file\"\n           :src='get_image_url(file)'\n           :data-file='file'\n           :class='{selected: is_selected(file)}'\n           @click.stop.prevent=\"select_image\">\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport * as utils from \"@/utils\";\n\nexport default {\n  created: function() {\n    this.$store.dispatch(\"load_imagefile_list\");\n  },\n  data: function() {\n    return {\n      IMAGE_RELOAD_MARGIN: 100,\n      IMAGE_RELOAD_AMOUNT: 300\n    };\n  },\n  computed: {\n    ...mapState([\n      \"loading_message\",\n      \"files\",\n      \"filename_max_display\",\n      \"active_image_filename\"\n    ]),\n\n    file_list_top: function() {\n      if (!this.files) {\n        return [];\n      }\n      return this.files.slice(0, this.filename_max_display);\n    },\n\n    file_list: function() {\n      let keys = Object.keys(this.files).sort((l, r) => l - r);\n      let ret = [];\n      keys.forEach(k => ret.push(this.files[k]));\n      return ret;\n    }\n  },\n  watch: {\n    active_image_filename: function(newvalue, oldvalue) {\n      let n = this.files.indexOf(newvalue);\n      if (n === -1) {\n        return;\n      }\n      let img = this.$el.querySelector(`#imagelist img:nth-child(${n + 1})`);\n      if (!img) {\n        return;\n      }\n      let imgrc = img.getBoundingClientRect();\n\n      let wrapper = this.$el.querySelector(`#imagelist`);\n\n      let wrapperrc = wrapper.getBoundingClientRect();\n\n      if (imgrc.bottom >= wrapperrc.bottom) {\n        let dy = imgrc.bottom - wrapperrc.bottom;\n\n        wrapper.scrollBy(0, dy + wrapperrc.height / 4);\n      } else if (imgrc.top < wrapperrc.top) {\n        let dy = imgrc.top - wrapperrc.top - wrapperrc.height / 4;\n        wrapper.scrollBy(0, dy);\n      }\n    }\n  },\n  methods: {\n    get_image_url(file) {\n      return utils.build_api_url(\"/t/\" + file);\n    },\n    is_selected(filename) {\n      return filename === this.active_image_filename;\n    },\n    select_image(event) {\n      if (event.target.dataset.file !== this.active_image_filename) {\n        this.$store.dispatch(\"load_current_image\", event.target.dataset.file);\n      }\n    },\n    on_scroll: function(event) {\n      if (this.filename_max_display < this.files.length) {\n        let n = this.filename_max_display - this.IMAGE_RELOAD_MARGIN;\n        if (n <= 0) {\n          n = 1;\n        }\n        let img = this.$el.querySelector(`#imagelist img:nth-child(${n})`);\n        if (img === null) {\n          return;\n        }\n\n        let imgrc = img.getBoundingClientRect();\n        let wrapper = this.$el.querySelector(`#imagelist`);\n        let wrapperrc = wrapper.getBoundingClientRect();\n\n        if (imgrc.top <= wrapperrc.top) {\n          this.$store.commit(\"set_filename_max_display\", {\n            max_display: this.filename_max_display + this.IMAGE_RELOAD_AMOUNT\n          });\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang='scss'>\n#imagelistblock {\n  width: 400px;\n  box-sizing: border-box;\n  flex-grow: 0;\n  flex-shrink: 0;\n  overflow: hidden;\n  padding: 3px;\n}\n\n#msg_no_image {\n  position: absolute;\n  font-weight: bold;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 200px;\n  height: 100px;\n  margin: auto;\n}\n\n#imagelist {\n  display: flex;\n  flex-wrap: wrap;\n  overflow: auto;\n  box-sizing: border-box;\n  height: 100%;\n  align-content: flex-start;\n  justify-content: space-between;\n\n  img {\n    box-sizing: border-box;\n    align-self: baseline;\n    margin: 1px;\n    flex-grow: 0;\n    flex-shrink: 0;\n\n    &.selected {\n      box-sizing: border-box;\n      outline: 4px solid #e73;\n      outline-offset: -4px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/imagelist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"imagelistblock\"}},[(_vm.file_list.length === 0)?_c('div',{attrs:{\"id\":\"msg_no_image\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.loading_message)+\"\\n  \")]):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"imagelist\"},on:{\"scroll\":_vm.on_scroll}},_vm._l((_vm.file_list_top),function(file){return _c('img',{key:file,class:{selected: _vm.is_selected(file)},attrs:{\"src\":_vm.get_image_url(file),\"data-file\":file},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.select_image($event)}}})}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-75472fe0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/imagelist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-75472fe0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./imagelist.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./imagelist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./imagelist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-75472fe0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./imagelist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-75472fe0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/imagelist.vue\n// module id = null\n// module chunks = ","<template>\n<div class='navarrow' @click=\"on_click\">\n  <div v-if='next_file' :class=\"['arrow', dir+'_arrow']\"></div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"NavArrow\",\n  props: [\"dir\"],\n\n  computed: {\n    ...mapState([\"files\", \"active_image_filename\"]),\n    next_file: function() {\n      if (this.dir === \"back\") {\n        return this.get_back_name();\n      } else {\n        return this.get_fore_name();\n      }\n    }\n  },\n  methods: {\n    get_back_name() {\n      const idx = this.files.indexOf(this.active_image_filename);\n      if (idx > 0) {\n        return this.files[idx - 1];\n      }\n    },\n\n    get_fore_name() {\n      const idx = this.files.indexOf(this.active_image_filename);\n      if (idx !== -1 && idx < this.files.length - 1) {\n        return this.files[idx + 1];\n      }\n    },\n\n    on_click: function(event) {\n      const next = this.next_file;\n      if (next) {\n        this.$store.dispatch(\"load_current_image\", next);\n      }\n    }\n  }\n};\n</script>\n\n<style lang='scss'>\n.navarrow {\n  position: relative;\n  width: 30px;\n  height: 60px;\n  margin: auto;\n  flex-grow: 0;\n  flex-shrink: 0;\n\n  cursor: pointer;\n\n  .arrow {\n    position: relative;\n    display: inline-block;\n    padding-left: 0px;\n    bottom: 0;\n\n    &:before {\n      content: \"\";\n      width: 25px;\n      height: 25px;\n      border: 0;\n\n      position: absolute;\n      top: 50%;\n      left: 0px;\n      margin-top: -4px;\n    }\n  }\n\n  .forward_arrow::before {\n    border-top: solid 2px #c2c2c2;\n    border-right: solid 2px #c2c2c2;\n    -ms-transform: rotate(45deg);\n    -webkit-transform: rotate(45deg);\n    transform: rotate(45deg);\n    left: -10px;\n  }\n\n  .back_arrow::before {\n    margin-left: 10px;\n\n    border-top: solid 2px #c2c2c2;\n    border-left: solid 2px #c2c2c2;\n    -ms-transform: rotate(-45deg);\n    -webkit-transform: rotate(-45deg);\n    transform: rotate(-45deg);\n  }\n}\n</style>\nborder\n\n\n\n// WEBPACK FOOTER //\n// src/components/navarrow.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"navarrow\",on:{\"click\":_vm.on_click}},[(_vm.next_file)?_c('div',{class:['arrow', _vm.dir+'_arrow']}):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-973cd486\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/navarrow.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-973cd486\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./navarrow.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./navarrow.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./navarrow.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-973cd486\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./navarrow.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/navarrow.vue\n// module id = null\n// module chunks = ","<template>\n  <div id='canvasblock'>\n    <div id=\"canvaspanel\" ref=\"canvaspanel\"\n        @mousedown.stop='on_click'\n        @mousemove.stop.prevent='on_mousemove'>\n        \n      <img v-if=\"has_image\" id=\"canvas\" ref=\"canvas\" :src=\"image_url\"\n       @dragstart.stop.prevent=\"on_drag_start\">\n      <div v-if=\"is_creating()\" id=\"newtag\" :style=\"newtag_style()\" />\n\n      <div v-for=\"(tagstyle, idx) in boxes\" :key=\"idx\"\n          :style='tagstyle' \n          class='box-border' \n          :data-boxid='idx' @mousedown.stop.prevent='on_boxclick'\n          @mousemove='on_boxmousemove'>\n        <div :class=\"['box', is_active_box(idx) ? 'box-active':'']\">\n          <div class='taglabel'>{{get_box_label(idx)}}</div>\n        </div>\n      </div>\n    </div>\n\n    <div id='imageinfo'>\n      <div>{{img_file_name}}</div>\n      <button id=\"save_xml_btn\"\n        :disabled=\"!canbesaved\"\n        @click='save_tags'>\n        Save <span class=\"save_xml_btn_arrow\">&gt;&gt;</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from \"vuex\";\nimport * as utils from \"@/utils\";\n\nexport default {\n  data: function() {\n    return {\n      BOX_MARGIN: 2, // margin between box and box-border\n      BOX_BORDER: 3, // width of border of box\n      status: \"\", // one of 'new', 'moving', 'n', 'nw', ...\n\n      dragfrom_x: null, // x pos in client coord\n      dragfrom_y: null, // y pos in client coord\n\n      newbox_rect: null, // rect of new box in client coord\n      org_boxrc: null,\n      boxes: null\n    };\n  },\n\n  created: function() {\n    window.addEventListener(\"resize\", this.on_resize);\n    window.addEventListener(\"keyup\", this.on_keyup);\n  },\n\n  beforeDestroy: function() {\n    window.removeEventListener(\"resize\", this.on_resize);\n    window.removeEventListener(\"keyup\", this.on_keyup);\n  },\n  mounted: function() {\n    setTimeout(this.arrange_boxes, 20);\n  },\n  computed: {\n    ...mapState([\n      \"active_image_filename\",\n      \"active_image\",\n      \"active_image_height\",\n      \"active_image_width\",\n      \"active_image_tag_boxes\",\n      \"active_boxid\",\n      \"labels\"\n    ]),\n\n    image_url: function() {\n      return this.active_image;\n    },\n    has_image: function() {\n      return Boolean(this.active_image_filename);\n    },\n    img_file_name: function() {\n      let idx = this.active_image_filename.search(/[/\\\\]/);\n      return this.active_image_filename.slice(idx + 1);\n    },\n    canbesaved: function() {\n      if (this.active_image_tag_boxes.length === 0) {\n        return false;\n      }\n      for (let box of this.active_image_tag_boxes) {\n        if (!box.label) {\n          return false;\n        }\n      }\n      return true;\n    }\n  },\n  watch: {\n    active_image_tag_boxes: function() {\n      this.arrange_boxes();\n    }\n  },\n  methods: {\n    ...mapMutations([\"set_active_boxid\"]),\n\n    newtag_style: function() {\n      let ret = this.to_canvas_rect(this.newbox_rect);\n      return this.size_style(ret);\n    },\n\n    on_drag_start: function(idx) {\n      // does nothing\n      return false;\n    },\n\n    is_creating: function() {\n      return this.status === \"new\";\n    },\n\n    is_active_box: function(idx) {\n      return this.active_boxid === idx;\n    },\n\n    get_box: function(id) {\n      return this.active_image_tag_boxes[id];\n    },\n\n    get_box_label(id) {\n      return this.get_box(id).label;\n    },\n\n    to_canvas_rect: function(rc) {\n      let [l, t, r, b] = utils.normalize_rect(rc);\n\n      [[l, t], [r, b]] = utils.client_to_node(this.$refs.canvaspanel, [\n        [l, t],\n        [r, b]\n      ]);\n      return [l, t, r, b];\n    },\n\n    on_resize: function() {\n      this.arrange_boxes();\n      setTimeout(this.arrange_boxes, 10);\n    },\n\n    on_keyup: function(event) {\n      if (event.target.nodeName === \"BODY\") {\n        if (event.key === \" \") {\n          if (this.canbesaved) {\n            this.save_tags();\n            event.preventDefault();\n            event.stopPropagation();\n            return false;\n          }\n        }\n        if (this.has_image && this.active_boxid !== null) {\n          if (event.key === \"Delete\" || event.key === \"Backspace\") {\n            this.$store.commit(\"remove_tagbox\", { boxid: this.active_boxid });\n            event.preventDefault();\n            event.stopPropagation();\n            return false;\n          }\n          for (let label of this.labels) {\n            if (label.shortcut === event.key) {\n              this.$store.commit(\"set_activebox_label\", label);\n              event.preventDefault();\n              event.stopPropagation();\n              return false;\n            }\n          }\n        }\n      }\n    },\n\n    size_style: function(rc) {\n      const left = `${rc[0]}px`;\n      const top = `${rc[1]}px`;\n      const width = `${rc[2] - rc[0]}px`;\n      const height = `${rc[3] - rc[1]}px`;\n      return {\n        left,\n        top,\n        width,\n        height\n      };\n    },\n\n    calc_image_rect: function() {\n      const imgrc = this.$refs.canvas.getBoundingClientRect();\n      const orgwidth = this.active_image_width;\n      const orgheight = this.active_image_height;\n\n      const ratio1 = imgrc.width / orgwidth;\n      const ratio2 = imgrc.height / orgheight;\n\n      const ratio = utils.min(ratio1, ratio2);\n      const margin = utils.max(0, (imgrc.width - orgwidth * ratio) / 2);\n\n      const left = imgrc.left + margin;\n      const right = Math.floor(left + orgwidth * ratio);\n      const top = imgrc.top;\n      const bottom = Math.floor(imgrc.top + orgheight * ratio);\n      return [ratio, [left, top, right, bottom]];\n    },\n\n    box_to_client: function(box) {\n      let [ratio, imgrc] = this.calc_image_rect();\n      const l = Math.floor(box.left * ratio + imgrc[0]);\n      const t = Math.floor(box.top * ratio + imgrc[1]);\n      const r = Math.floor(box.right * ratio + imgrc[0]);\n      const b = Math.floor(box.bottom * ratio + imgrc[1]);\n      return [l, t, r, b];\n    },\n\n    client_to_box: function(rect) {\n      let [left, top, right, bottom] = utils.normalize_rect(rect);\n      let [ratio, imgrc] = this.calc_image_rect();\n      left = Math.floor((left - imgrc[0]) / ratio);\n      top = Math.floor((top - imgrc[1]) / ratio);\n      right = Math.floor((right - imgrc[0]) / ratio);\n      bottom = Math.floor((bottom - imgrc[1]) / ratio);\n\n      return { left, top, right, bottom };\n    },\n\n    arrange_boxes: function() {\n      const boxes = [];\n      if (!this.$refs.canvas || !this.active_image_tag_boxes) {\n        return;\n      }\n      for (let box of this.active_image_tag_boxes) {\n        const rc = this.to_canvas_rect(this.box_to_client(box));\n        boxes.push(\n          this.size_style([\n            rc[0] - this.BOX_MARGIN,\n            rc[1] - this.BOX_MARGIN,\n            rc[2] + this.BOX_MARGIN,\n            rc[3] + this.BOX_MARGIN\n          ])\n        );\n      }\n      this.boxes = boxes;\n    },\n\n    _clean_boxes: function() {\n      const tagboxes = [];\n      for (let box of this.active_image_tag_boxes) {\n        if (box.label) {\n          tagboxes.push(box);\n        }\n      }\n      this.$store.commit(\"set_tagboxes\", { tagboxes });\n    },\n\n    on_click: function(event) {\n      if (!this.has_image) {\n        return;\n      }\n\n      const [, rc] = this.calc_image_rect();\n      rc[2] = rc[2] - 1;\n      if (!utils.pt_in_rect(rc, event.clientX, event.clientY)) {\n        return;\n      }\n      this._clean_boxes();\n\n      [this.dragfrom_x, this.dragfrom_y] = [event.clientX, event.clientY];\n\n      this.status = \"new\";\n\n      // creating new box\n      this.newbox_rect = [\n        this.dragfrom_x,\n        this.dragfrom_y,\n        this.dragfrom_x,\n        this.dragfrom_y\n      ];\n      utils.addEventListenerOnce(document, \"mouseup\", this.end_drag, true);\n    },\n\n    box_getcursor_type: function(box_border, x, y) {\n      const rect = box_border.getBoundingClientRect();\n      const margin = this.BOX_MARGIN * 2 + this.BOX_BORDER;\n      if (x - rect.left <= margin) {\n        if (y - rect.top <= margin) {\n          return \"nw\";\n        } else if (rect.bottom - y <= margin) {\n          return \"sw\";\n        }\n        return \"w\";\n      }\n\n      if (rect.right - x <= margin) {\n        if (y - rect.top <= margin) {\n          return \"ne\";\n        } else if (rect.bottom - y <= margin) {\n          return \"se\";\n        }\n        return \"e\";\n      }\n      if (y - rect.top <= margin) {\n        return \"n\";\n      }\n      if (rect.bottom - y <= margin) {\n        return \"s\";\n      }\n      return \"\";\n    },\n\n    on_boxclick: function(event) {\n      const boxid = event.currentTarget.dataset.boxid;\n      if (boxid !== this.active_boxid) {\n        this._clean_boxes();\n      }\n      const tag = this.get_box(boxid);\n      if (!tag) {\n        return;\n      }\n      const resize = this.box_getcursor_type(\n        event.currentTarget,\n        event.clientX,\n        event.clientY\n      );\n      if (resize === \"\") {\n        this.status = \"dragging\";\n      } else {\n        this.status = resize;\n      }\n      this.set_active_boxid({ boxid: parseInt(boxid) });\n      const box = this.get_box(this.active_boxid);\n      this.org_boxrc = this.box_to_client(box);\n      [this.dragfrom_x, this.dragfrom_y] = [event.clientX, event.clientY];\n\n      utils.addEventListenerOnce(document, \"mouseup\", this.end_drag, true);\n    },\n\n    dir_to_cursor(dir) {\n      const cursor_map = {\n        n: \"ns-resize\",\n        nw: \"nwse-resize\",\n        ne: \"nesw-resize\",\n        w: \"ew-resize\",\n        e: \"ew-resize\",\n        s: \"ns-resize\",\n        sw: \"nesw-resize\",\n        se: \"nwse-resize\"\n      };\n      return cursor_map[dir];\n    },\n\n    on_boxmousemove: function(event) {\n      let status = this.status;\n      if (!status) {\n        status = this.box_getcursor_type(\n          event.currentTarget,\n          event.clientX,\n          event.clientY\n        );\n      }\n      let cursor = this.dir_to_cursor(status);\n      if (!cursor) {\n        cursor = \"move\";\n      }\n      event.target.style.cursor = cursor;\n    },\n\n    on_mousemove: function(event) {\n      if (!this.has_image) {\n        return;\n      }\n      let [, imgrc] = this.calc_image_rect();\n      let x = utils.min(utils.max(imgrc[0], event.clientX), imgrc[2]);\n      let y = utils.min(utils.max(imgrc[1], event.clientY), imgrc[3]);\n\n      if (this.status === \"new\") {\n        // resize newly created box\n        let [l, t] = this.newbox_rect;\n        this.newbox_rect = [l, t, x, y];\n      } else if (this.status) {\n        const rc = this.org_boxrc.slice();\n\n        let diff_x = x - this.dragfrom_x;\n        let diff_y = y - this.dragfrom_y;\n\n        if (this.status === \"dragging\") {\n          // move box\n\n          // check if the box going out of bounds\n          if (rc[0] - imgrc[0] + diff_x < 0) {\n            diff_x = (rc[0] - imgrc[0]) * -1;\n          }\n          if (rc[2] + diff_x > imgrc[2]) {\n            diff_x = imgrc[2] - rc[2];\n          }\n          if (rc[1] - imgrc[1] + diff_y < 0) {\n            diff_y = (rc[1] - imgrc[1]) * -1;\n          }\n          if (rc[3] + diff_y > imgrc[3]) {\n            diff_y = imgrc[3] - rc[3];\n          }\n          rc[0] += diff_x;\n          rc[2] += diff_x;\n          rc[1] += diff_y;\n          rc[3] += diff_y;\n        } else {\n          if (this.status.indexOf(\"n\") !== -1) {\n            rc[1] = utils.min(utils.max(imgrc[1], rc[1] + diff_y), rc[3] - 1);\n          }\n          if (this.status.indexOf(\"s\") !== -1) {\n            rc[3] = utils.min(utils.max(rc[1], rc[3] + diff_y), imgrc[3]);\n          }\n          if (this.status.indexOf(\"w\") !== -1) {\n            rc[0] = utils.min(utils.max(imgrc[0], rc[0] + diff_x), rc[2] - 1);\n          }\n          if (this.status.indexOf(\"e\") !== -1) {\n            rc[2] = utils.min(utils.max(rc[0], rc[2] + diff_x), imgrc[2] - 1);\n          }\n        }\n        const curbox = this.get_box(this.active_boxid);\n        const newbox = { ...curbox, ...this.client_to_box(rc) };\n        this.$store.commit(\"set_tagbox\", {\n          boxid: this.active_boxid,\n          box: newbox\n        });\n      }\n    },\n\n    end_drag: function() {\n      if (this.status === \"new\") {\n        const box = this.client_to_box(this.newbox_rect);\n        if (box.left !== box.right && box.top !== box.bottom) {\n          this.$store.commit(\"new_tagbox\", { box });\n          this.set_active_boxid({\n            boxid: this.active_image_tag_boxes.length - 1\n          });\n        }\n      }\n\n      this.status = \"\";\n    },\n\n    save_tags: function() {\n      this.$store.dispatch(\"save_annotation\");\n    }\n  }\n};\n</script>\n\n<style lang='scss' scoped>\n#canvasblock {\n  flex-grow: 1;\n}\n\n#canvaspanel {\n  flex-grow: 1;\n  display: flex;\n  position: relative;\n  height: calc(100% - 100px);\n\n  #canvas {\n    margin: auto;\n    width: 90%;\n    max-width: 90%;\n    max-height: 90%;\n    flex-grow: 0;\n    flex-shrink: 0;\n    object-fit: contain;\n  }\n\n  .box-border {\n    box-sizing: border-box;\n    position: absolute;\n\n    $BOX_MARGIN: 2px;\n\n    .taglabel {\n      position: absolute;\n      right: 0;\n      top: 0;\n      color: white;\n      background-color: #73dd00;\n    }\n\n    .box {\n      position: absolute;\n      border: solid #73dd00 3px;\n      left: $BOX_MARGIN;\n      top: $BOX_MARGIN;\n      right: $BOX_MARGIN;\n      bottom: $BOX_MARGIN;\n    }\n    .box-active {\n      border-color: red;\n      background-color: rgba(255, 255, 255, 0.7);\n\n      .taglabel {\n        background-color: red;\n      }\n    }\n  }\n\n  #newtag {\n    box-sizing: border-box;\n    position: absolute;\n    border: solid red 3px;\n  }\n}\n\n#imageinfo {\n  display: flex;\n  color: #666;\n  justify-content: center;\n  align-items: center;\n\n  #save_xml_btn {\n    background-color: #326699;\n    border-radius: 5px;\n    color: #fff;\n    padding: 3px 15px;\n    margin-left: 10px;\n    .save_xml_btn_arrow {\n      margin-left: 5px;\n    }\n\n    &:hover {\n      background-color: lighten(#326699, 10%);\n      cursor: pointer;\n    }\n\n    &:disabled {\n      background-color: #adadad;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tagcanvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"canvasblock\"}},[_c('div',{ref:\"canvaspanel\",attrs:{\"id\":\"canvaspanel\"},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.on_click($event)},\"mousemove\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.on_mousemove($event)}}},[(_vm.has_image)?_c('img',{ref:\"canvas\",attrs:{\"id\":\"canvas\",\"src\":_vm.image_url},on:{\"dragstart\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.on_drag_start($event)}}}):_vm._e(),_vm._v(\" \"),(_vm.is_creating())?_c('div',{style:(_vm.newtag_style()),attrs:{\"id\":\"newtag\"}}):_vm._e(),_vm._v(\" \"),_vm._l((_vm.boxes),function(tagstyle,idx){return _c('div',{key:idx,staticClass:\"box-border\",style:(tagstyle),attrs:{\"data-boxid\":idx},on:{\"mousedown\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.on_boxclick($event)},\"mousemove\":_vm.on_boxmousemove}},[_c('div',{class:['box', _vm.is_active_box(idx) ? 'box-active':'']},[_c('div',{staticClass:\"taglabel\"},[_vm._v(_vm._s(_vm.get_box_label(idx)))])])])})],2),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"imageinfo\"}},[_c('div',[_vm._v(_vm._s(_vm.img_file_name))]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"save_xml_btn\",\"disabled\":!_vm.canbesaved},on:{\"click\":_vm.save_tags}},[_vm._v(\"\\n      Save \"),_c('span',{staticClass:\"save_xml_btn_arrow\"},[_vm._v(\">>\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-379f8453\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tagcanvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-379f8453\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tagcanvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tagcanvas.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tagcanvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-379f8453\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tagcanvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-379f8453\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tagcanvas.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal\"}},[_c('div',{staticClass:\"modal-mask\"},[_c('div',{staticClass:\"modal-wrapper\"},[_c('div',{staticClass:\"modal-container\"},[_vm._t(\"contents\",[_vm._v(\"\\n          default content\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",[_vm._t(\"okbutton\",[_c('button',{staticClass:\"modal-default-button\",on:{\"click\":function($event){_vm.$emit('ok')}}},[_vm._v(\"\\n                Ok\\n              \")])]),_vm._v(\" \"),_vm._t(\"cancelbutton\",[_c('button',{staticClass:\"modal-default-button\",on:{\"click\":function($event){_vm.$emit('cancel')}}},[_vm._v(\"\\n                Cancel\\n              \")])])])],2)],2)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e753c49\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/modalbox.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e753c49\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./modalbox.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./modalbox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./modalbox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e753c49\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./modalbox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/modalbox.vue\n// module id = null\n// module chunks = ","<template>\n<div id=\"tags\">\n  <div id='tag-list-header'>\n    Class List\n  </div>\n  <form id=\"add-new-label-form\">\n    <div class=\"add-new-label-input-area\">\n      <input type=\"text\"\n              class=\"label-text\"\n              v-model='label'\n              placeholder=\"label name...\">\n      <input type=\"text\"\n              class=\"label-shortcut\"\n              v-model='shortcut'\n              @keydown='keydown'\n              @keyup='setShortcutKey'\n              placeholder=\"key...\">\n    </div>\n    <div v-if='errormsg' class='label_errormsg'>{{errormsg}}</div>\n    <button @click.prevent.stop=\"addNewLabel\" type=\"button\" class=\"add-new-label-btn\" :disabled='!is_valid_label'>Add New Label</button>\n  </form>\n\n  <div id='tag-tree'>\n    <ul class='tag-list'>\n        <li v-for='{label, shortcut} in labels' :key='label'\n            class='tag-list-item' @click=\"on_click\" :data-label='label'>\n          <div class=\"label-text\">{{label}}</div>\n          <div v-if='shortcut' class=\"label-shortcut\">{{shortcut}}</div>\n        </li>\n    </ul>\n\n  </div>\n  <button @click='show_delete_dialog=true' id='remove-button'>Refresh list</button>\n  \n  <modal-box v-if='show_delete_dialog'\n    @ok='delete_tags'\n    @cancel='show_delete_dialog=false' >\n    <div slot='contents'>\n      Are you sure flushing class list?\n    </div>\n    <span slot=\"okbutton\">\n      <button id=\"delete_labels_button\" class=\"modal-default-button\"\n        @click=\"delete_tags\">\n        Delete labels\n      </button>\n    </span>\n\n  </modal-box>\n</div>\n\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport ModalBox from \"@/components/modalbox\";\n\nexport default {\n  components: {\n    \"modal-box\": ModalBox\n  },\n\n  data: function() {\n    return {\n      label: \"\",\n      shortcut: \"\",\n      show_delete_dialog: false\n    };\n  },\n\n  created: function() {\n    this.$store.dispatch(\"load_label_candidates_dict\");\n  },\n\n  computed: {\n    ...mapState([\"labels\"]),\n\n    errormsg: function() {\n      if (this.label.length) {\n        if (!this.label.match(\"^[0-9a-z-A-Z]+$\")) {\n          return \"Class name must be alphanumeric single-byte.\";\n        }\n      }\n      for (let { label, shortcut } of this.labels) {\n        if (label === this.label) {\n          return \"Please set unique label.\";\n        }\n        if (this.shortcut && shortcut === this.shortcut) {\n          return \"Shortcut is already exists.\";\n        }\n      }\n      return \"\";\n    },\n\n    is_valid_label: function() {\n      if (!this.label.length) {\n        return false;\n      }\n      return this.errormsg === \"\";\n    }\n  },\n\n  methods: {\n    addNewLabel: function() {\n      this.$store.dispatch(\"add_label\", {\n        label: this.label,\n        shortcut: this.shortcut\n      });\n      this.label = this.shortcut = \"\";\n      document.body.focus();\n    },\n\n    is_control_key(k) {\n      const keys = [\n        13, // Enter(ten key)\n        32, // Space\n        8, // BackSpace\n        9, // Tab\n        46 // Delete\n      ];\n      if (keys.indexOf(k) >= 0) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    keydown(event) {\n      if (event.keyCode === 46 || event.keyCode === 8) {\n        // delete or backspace\n        this.shortcut = \"\";\n        event.preventDefault();\n        return;\n      }\n      if (!this.is_control_key(event.keyCode)) {\n        event.preventDefault();\n      }\n    },\n\n    setShortcutKey(event) {\n      if (this.is_control_key(event.keyCode)) {\n        return;\n      }\n\n      this.shortcut = event.key;\n    },\n\n    on_click(event) {\n      const label = event.currentTarget.dataset.label;\n      this.$store.commit(\"set_activebox_label\", { label });\n    },\n\n    delete_tags(event) {\n      this.$store.commit(\"set_labels\", []);\n      this.show_delete_dialog = false;\n    }\n  }\n};\n</script>\n\n<style lang='scss'>\n#tags {\n  box-sizing: border-box;\n  width: 250px;\n  height: 100%;\n  flex-grow: 0;\n  flex-shrink: 0;\n\n  padding: 0 25px;\n  background-color: #f4f4f2;\n\n  #tag-list-header {\n    font-size: 18px;\n    font-weight: bold;\n    width: 200px;\n    margin: 0 auto;\n    padding: 20px 0 5px 0;\n  }\n\n  #add-new-label-form {\n    padding: 0;\n    margin: 0;\n    background: none;\n    border: none;\n  }\n\n  .add-new-label-input-area {\n    display: flex;\n    justify-content: space-between;\n    border-color: #7d7d7d;\n    margin: 0;\n\n    &::-webkit-input-placeholder {\n      color: #a6a6a6;\n      font-size: 13px;\n    }\n\n    input {\n      padding: 3px 7px;\n      border-color: #7d7d7d;\n      margin: 0;\n      &::-webkit-input-placeholder {\n        color: #a6a6a6;\n        font-size: 13px;\n      }\n    }\n    input.label-text {\n      width: 130px;\n    }\n    input.label-shortcut {\n      width: 62.5px;\n    }\n  }\n  .add-new-label-btn {\n    width: 100%;\n    text-align: center;\n    padding: 10px 0;\n    margin: 10px 0 0 0;\n    cursor: pointer;\n    border: none;\n    border-radius: 5px;\n    background-color: #326699;\n    color: #fff;\n    &:focus {\n      outline: none;\n    }\n    &:hover {\n      background-color: lighten(#326699, 10%);\n    }\n  }\n\n  .add-new-label-btn:disabled {\n    background-color: #adadad;\n  }\n\n  #tag-tree {\n    padding-top: 15px;\n    height: calc(100% - 240px);\n    overflow-y: auto;\n    .tag-list {\n      width: 100%;\n      height: 100%;\n      font-weight: bold;\n      box-sizing: border-box;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      border-style: none;\n    }\n  }\n\n  .tag-list-item {\n    width: 100%;\n    border-top: 1px solid #797979;\n    padding: 5px 10px 5px 10px;\n    display: flex;\n    justify-content: space-between;\n    box-sizing: border-box;\n\n    &:last-child {\n      border-bottom: 1px solid #797979;\n    }\n\n    &:hover {\n      background-color: #d3d3d3;\n    }\n\n    .label-text,\n    .label-shortcut {\n      padding: 0;\n      margin: 0;\n      outline: none;\n      color: #777777;\n    }\n\n    .label-text {\n      flex: 1;\n    }\n    .label-shortcut {\n      width: 25px;\n      text-align: center;\n      color: #3c3c3c;\n      background: #fff;\n      border: 1px solid #3c3c3c;\n      border-radius: 5px;\n      margin-right: 5px;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n\n  #remove-button {\n    width: 60%;\n    text-align: center;\n    padding: 10px 0;\n    cursor: pointer;\n    border: none;\n    border-radius: 5px;\n    background-color: #adadad;\n    color: #fff;\n    margin-left: auto;\n\n    &:focus {\n      outline: none;\n    }\n    &:hover {\n      background-color: lighten(#ff1616, 10%);\n    }\n  }\n  .label_errormsg {\n    display: block;\n    position: absolute;\n    font-weight: bold;\n    color: #ff1616;\n    font-size: 10pt;\n    z-index: 9999;\n    background-color: #f2ee63;\n    margin: 5px;\n    padding: 5px;\n    border-radius: 5px;\n    right: 20px;\n  }\n  #delete_labels_button {\n    background-color: lighten(#ff1616, 10%);\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tags.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tags\"}},[_c('div',{attrs:{\"id\":\"tag-list-header\"}},[_vm._v(\"\\n    Class List\\n  \")]),_vm._v(\" \"),_c('form',{attrs:{\"id\":\"add-new-label-form\"}},[_c('div',{staticClass:\"add-new-label-input-area\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.label),expression:\"label\"}],staticClass:\"label-text\",attrs:{\"type\":\"text\",\"placeholder\":\"label name...\"},domProps:{\"value\":(_vm.label)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.label=$event.target.value}}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.shortcut),expression:\"shortcut\"}],staticClass:\"label-shortcut\",attrs:{\"type\":\"text\",\"placeholder\":\"key...\"},domProps:{\"value\":(_vm.shortcut)},on:{\"keydown\":_vm.keydown,\"keyup\":_vm.setShortcutKey,\"input\":function($event){if($event.target.composing){ return; }_vm.shortcut=$event.target.value}}})]),_vm._v(\" \"),(_vm.errormsg)?_c('div',{staticClass:\"label_errormsg\"},[_vm._v(_vm._s(_vm.errormsg))]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"add-new-label-btn\",attrs:{\"type\":\"button\",\"disabled\":!_vm.is_valid_label},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addNewLabel($event)}}},[_vm._v(\"Add New Label\")])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"tag-tree\"}},[_c('ul',{staticClass:\"tag-list\"},_vm._l((_vm.labels),function(ref){\nvar label = ref.label;\nvar shortcut = ref.shortcut;\nreturn _c('li',{key:label,staticClass:\"tag-list-item\",attrs:{\"data-label\":label},on:{\"click\":_vm.on_click}},[_c('div',{staticClass:\"label-text\"},[_vm._v(_vm._s(label))]),_vm._v(\" \"),(shortcut)?_c('div',{staticClass:\"label-shortcut\"},[_vm._v(_vm._s(shortcut))]):_vm._e()])}))]),_vm._v(\" \"),_c('button',{attrs:{\"id\":\"remove-button\"},on:{\"click\":function($event){_vm.show_delete_dialog=true}}},[_vm._v(\"Refresh list\")]),_vm._v(\" \"),(_vm.show_delete_dialog)?_c('modal-box',{on:{\"ok\":_vm.delete_tags,\"cancel\":function($event){_vm.show_delete_dialog=false}}},[_c('div',{attrs:{\"slot\":\"contents\"},slot:\"contents\"},[_vm._v(\"\\n      Are you sure flushing class list?\\n    \")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"okbutton\"},slot:\"okbutton\"},[_c('button',{staticClass:\"modal-default-button\",attrs:{\"id\":\"delete_labels_button\"},on:{\"click\":_vm.delete_tags}},[_vm._v(\"\\n        Delete labels\\n      \")])])]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f9d7c6b8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tags.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f9d7c6b8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./tags.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tags.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./tags.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f9d7c6b8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./tags.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tags.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"tagged-images\">\n    <div class=\"labelbox\">\n      <div class=\"label_text\">Labeled<br>Images</div>\n    \n    \n    </div><div v-for=\"image in tagged_images\" :key=\"image.filename\" class='tagged-image'\n         :style=\"{'background-image': 'url('+image.image+')', width:imagewidth(image)+'px'}\"\n         :data-filename='image.filename'\n         @click.stop.prevent='on_click'> \n\n        <div v-for=\"(box, idx) in image.boxes\" class='image-box' :key='idx'\n           :style='boxstyles(image, box)'>\n        <div class='taglabel'>{{box.label}}</div>\n\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n\nexport const BLOCK_HEIGHT = 200;\n\nexport default {\n  computed: {\n    ...mapState([\"tagged_images\"])\n  },\n\n  methods: {\n    ratio: function(image) {\n      return BLOCK_HEIGHT / image.height;\n    },\n\n    imagewidth: function(image) {\n      const ratio = this.ratio(image);\n      return image.width * ratio;\n    },\n    boxstyles: function(image, box) {\n      const ratio = this.ratio(image);\n      return {\n        left: `${box.left * ratio}px`,\n        top: `${box.top * ratio}px`,\n        width: `${(box.right - box.left) * ratio}px`,\n        height: `${(box.bottom - box.top) * ratio}px`\n      };\n    },\n    on_click: function(event) {\n      const filename = event.currentTarget.dataset.filename;\n      this.$store.dispatch(\"load_current_image\", filename);\n    }\n  }\n};\n</script>\n\n<style scoped lang='scss'>\n#tagged-images {\n  position: relative;\n  box-sizing: border-box;\n  background-color: #cccccc;\n  white-space: nowrap;\n  height: 200px;\n  width: 100%;\n  overflow: hidden;\n  flex-wrap: wrap;\n\n  .labelbox {\n    position: relative;\n    display: inline-block;\n    line-height: normal;\n    color: white;\n    background-color: #2d3e50;\n    width: 200px;\n    height: 200px;\n    text-align: center;\n  }\n  .label_text {\n    position: absolute;\n    margin: auto;\n    width: 200px;\n    margin-top: 60px;\n  }\n  .tagged-image {\n    box-sizing: border-box;\n    position: relative;\n    display: inline-block;\n    height: 200px;\n    background-size: cover;\n    margin-top: 0px;\n  }\n\n  .image-box {\n    position: absolute;\n    border: solid 1px red;\n\n    .taglabel {\n      position: absolute;\n      right: 0;\n      top: 0;\n      color: white;\n      background-color: red;\n      font-size: 10px;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/taggedimages.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tagged-images\"}},[_vm._m(0),_vm._l((_vm.tagged_images),function(image){return _c('div',{key:image.filename,staticClass:\"tagged-image\",style:({'background-image': 'url('+image.image+')', width:_vm.imagewidth(image)+'px'}),attrs:{\"data-filename\":image.filename},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.on_click($event)}}},_vm._l((image.boxes),function(box,idx){return _c('div',{key:idx,staticClass:\"image-box\",style:(_vm.boxstyles(image, box))},[_c('div',{staticClass:\"taglabel\"},[_vm._v(_vm._s(box.label))])])}))})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"labelbox\"},[_c('div',{staticClass:\"label_text\"},[_vm._v(\"Labeled\"),_c('br'),_vm._v(\"Images\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18abb8b0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/taggedimages.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-18abb8b0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./taggedimages.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taggedimages.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taggedimages.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18abb8b0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./taggedimages.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-18abb8b0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/taggedimages.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"page\">\n    <app-header></app-header>\n    <div id='main-container'>\n      <left-menu></left-menu>\n      <image-list/>\n      <navarrow dir=\"back\"/>\n      <div v-if=\"active_image_filename === null\" class=\"filler\"></div>\n      <tagcanvas v-if=\"active_image_filename != null\" ></tagcanvas>\n      <navarrow dir=\"forward\"/>\n      <tags></tags>\n    </div>\n    <tagged-images/>\n\n    <modal-box v-if='error_status'>\n      <div slot='contents' class='error-msg'>\n        {{error_status}}\n      </div>\n      <div slot='footer'>\n        <button class='error-button' @click='set_error_status({error_status: \"\"})'>close</button>\n      </div>\n    </modal-box>\n    \n  </div>\n\n</template>\n\n<script>\nimport AppHeader from \"./header.vue\";\nimport LeftMenu from \"./leftmenu.vue\";\nimport ImageList from \"@/components/imagelist\";\nimport NavArrow from \"@/components/navarrow\";\nimport TagCanvas from \"./tagcanvas.vue\";\nimport Tags from \"./tags.vue\";\nimport TaggedImages from \"./taggedimages.vue\";\nimport ModalBox from \"@/components/modalbox\";\n\nimport { mapState, mapMutations } from \"vuex\";\n\nexport default {\n  components: {\n    \"app-header\": AppHeader,\n    \"left-menu\": LeftMenu,\n    \"image-list\": ImageList,\n    tagcanvas: TagCanvas,\n    tags: Tags,\n    \"tagged-images\": TaggedImages,\n    navarrow: NavArrow,\n    \"modal-box\": ModalBox\n  },\n  computed: {\n    ...mapState([\"active_image_filename\", \"error_status\"])\n  },\n  methods: {\n    ...mapMutations([\"set_error_status\"])\n  }\n};\n</script>\n<style lang='scss'>\n#page {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n}\n\n#main-container {\n  box-sizing: border-box;\n  display: flex;\n  height: calc(100% - 50px - 200px);\n  align-items: stretch;\n  width: 100%;\n\n  .filler {\n    flex-grow: 1;\n  }\n}\n\n.error-msg {\n  text-align: center;\n  font-weight: bold;\n  margin-bottom: 0;\n}\n\n.error-button {\n  margin-bottom: 0;\n  text-align: right;\n  font-weight: normal;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/taggerpage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"page\"}},[_c('app-header'),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"main-container\"}},[_c('left-menu'),_vm._v(\" \"),_c('image-list'),_vm._v(\" \"),_c('navarrow',{attrs:{\"dir\":\"back\"}}),_vm._v(\" \"),(_vm.active_image_filename === null)?_c('div',{staticClass:\"filler\"}):_vm._e(),_vm._v(\" \"),(_vm.active_image_filename != null)?_c('tagcanvas'):_vm._e(),_vm._v(\" \"),_c('navarrow',{attrs:{\"dir\":\"forward\"}}),_vm._v(\" \"),_c('tags')],1),_vm._v(\" \"),_c('tagged-images'),_vm._v(\" \"),(_vm.error_status)?_c('modal-box',[_c('div',{staticClass:\"error-msg\",attrs:{\"slot\":\"contents\"},slot:\"contents\"},[_vm._v(\"\\n      \"+_vm._s(_vm.error_status)+\"\\n    \")]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"error-button\",on:{\"click\":function($event){_vm.set_error_status({error_status: \"\"})}}},[_vm._v(\"close\")])])]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3fbf61ac\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/taggerpage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3fbf61ac\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./taggerpage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taggerpage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./taggerpage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3fbf61ac\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./taggerpage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/taggerpage.vue\n// module id = null\n// module chunks = ","import Vue from \"vue\";\nimport Router from \"vue-router\";\nimport TaggerPage from \"@/components/taggerpage\";\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n    {\n      path: \"/\",\n      name: \"TaggerPage\",\n      component: TaggerPage\n    }\n  ]\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","let state = {\n  // error state\n  error_status: \"\",\n  // menu state\n  main_menu_visible: false,\n\n  loading_message: \"Loading images...\",\n\n  // image files\n  files: [],\n  filename_max_display: 0,\n\n  // active image\n  active_image_filename: null,\n  active_image: {},\n  active_boxid: null,\n\n  // tag boxes\n  active_image_tag_boxes: [],\n\n  // labels\n  labels: [],\n\n  // tagged images\n  tagged_images: []\n};\n\nexport default state;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/state.js","function _set_tagbox(state, payload) {\n  const pri = state.active_image_tag_boxes.slice(0, payload.boxid);\n  const follow = state.active_image_tag_boxes.slice(payload.boxid + 1);\n\n  state.active_image_tag_boxes = [...pri, payload.box, ...follow];\n}\n\nexport default {\n  set_error_status(state, payload) {\n    state.error_status = payload.error_status;\n  },\n\n  set_loading_message(state, payload) {\n    state.loading_message = payload.loading_message;\n  },\n\n  set_main_menu_visible(state, payload) {\n    state.main_menu_visible = payload.visible;\n  },\n\n  set_file_list(state, payload) {\n    state.files = payload.file_list;\n    state.filename_max_display = 100;\n    if (!state.files || state.files.length === 0) {\n      state.loading_message = \"No images found.\";\n    }\n  },\n\n  set_filename_max_display(state, payload) {\n    state.filename_max_display = payload.max_display;\n  },\n\n  remove_image(state, payload) {\n    const files = [];\n    for (const file of state.files) {\n      if (payload.filename !== file) {\n        files.push(file);\n      }\n    }\n    state.files = files;\n  },\n\n  set_active_image(state, payload) {\n    state.active_image_filename = payload.filename;\n    state.active_image_width = payload.width;\n    state.active_image_height = payload.height;\n    state.active_image = payload.image;\n    state.active_image_tag_boxes = payload.boxes;\n\n    state.active_boxid = null;\n  },\n\n  set_active_boxid(state, payload) {\n    state.active_boxid = payload.boxid;\n  },\n\n  new_tagbox(state, payload) {\n    state.active_image_tag_boxes = [\n      ...state.active_image_tag_boxes,\n      payload.box\n    ];\n  },\n\n  set_tagbox(state, payload) {\n    _set_tagbox(state, payload);\n  },\n\n  set_tagboxes(state, payload) {\n    state.active_image_tag_boxes = payload.tagboxes;\n  },\n\n  remove_tagbox(state, payload) {\n    const pri = state.active_image_tag_boxes.slice(0, payload.boxid);\n    const follow = state.active_image_tag_boxes.slice(payload.boxid + 1);\n\n    state.active_image_tag_boxes = [...pri, ...follow];\n    state.active_boxid = null;\n  },\n\n  set_activebox_label(state, payload) {\n    const boxid = state.active_boxid;\n    if (boxid === null) {\n      return;\n    }\n    const box = state.active_image_tag_boxes[boxid];\n    const newbox = Object.assign(box, { label: payload.label });\n\n    _set_tagbox(state, { boxid, box: newbox });\n  },\n\n  set_dragger(state, payload) {\n    if (payload === null) {\n      state.dragger = {};\n    } else {\n      state.dragger = { ...state.dragger, ...payload };\n    }\n  },\n\n  add_label(state, payload) {\n    state.labels = [...state.labels, payload];\n  },\n\n  set_labels(state, labels) {\n    state.labels = labels;\n  },\n\n  add_tagged_image(state, payload) {\n    const imgs = [payload];\n    const MAX_WIDTH = 10000;\n    const IMAGE_HEIGHT = 200;\n\n    let width = 0;\n    for (const img of state.tagged_images) {\n      if (img.filename !== payload.filename) {\n        imgs.push(img);\n      }\n      width += img.width * (img.height / IMAGE_HEIGHT);\n      if (width > MAX_WIDTH) {\n        break;\n      }\n    }\n    state.tagged_images = imgs;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation.js","import axios from \"axios\";\nimport * as utils from \"@/utils\";\n\nasync function async_func(context, f) {\n  let ret;\n  try {\n    ret = await f();\n  } catch (error) {\n    context.commit(\"set_error_status\", {\n      error_status: \"Failed to connect server\"\n    });\n    console.error(error);\n    throw error;\n  }\n\n  return ret;\n}\n\nexport default {\n  async load_imagefile_list(context) {\n    context.commit(\"set_loading_message\", {\n      loading_message: \"Loading images...\"\n    });\n    let response = await async_func(context, () =>\n      axios.post(utils.build_api_url(\"/api/get_filename_list\"))\n    );\n\n    context.commit(\"set_file_list\", {\n      file_list: response.data.filename_list\n    });\n    if (context.state.files.length > 0) {\n      context.dispatch(\"load_current_image\", context.state.files[0]);\n    }\n  },\n\n  async load_current_image(context, file) {\n    context.commit(\"set_active_image\", {\n      file: null\n    });\n\n    let response = await async_func(context, () =>\n      axios.get(utils.build_api_url(\"/api/get_raw_img/\" + file))\n    );\n\n    const boxes = [];\n    if (response.data.boxes && response.data.boxes.annotation) {\n      for (const box of response.data.boxes.annotation.object) {\n        boxes.push({\n          label: box.name,\n          left: box.bndbox.xmin,\n          right: box.bndbox.xmax,\n          top: box.bndbox.ymin,\n          bottom: box.bndbox.ymax\n        });\n      }\n    }\n\n    context.commit(\"set_active_image\", {\n      filename: file,\n      width: response.data.width,\n      height: response.data.height,\n      image: \"data:image;base64,\" + response.data.img,\n      boxes\n    });\n  },\n\n  async add_label(context, payload) {\n    context.commit(\"add_label\", payload);\n    await async_func(context, () =>\n      axios.post(\n        utils.build_api_url(\"/api/save_label_candidates_dict\"),\n        context.state.labels\n      )\n    );\n  },\n\n  async load_label_candidates_dict(context, payload) {\n    let response = await async_func(context, () =>\n      axios.post(\n        utils.build_api_url(\"/api/load_label_candidates_dict\"),\n        context.state.labels\n      )\n    );\n    context.commit(\"set_labels\", response.data);\n  },\n\n  async save_annotation(context) {\n    const cur_filename = context.state.active_image_filename;\n    const value = {\n      annotation: {\n        path: cur_filename,\n        source: {\n          database: \"Unknown\"\n        },\n        size: {\n          width: context.state.active_image_width,\n          height: context.state.active_image_height,\n          depth: 3\n        },\n        segments: 0,\n        objects: []\n      }\n    };\n\n    for (let box of context.state.active_image_tag_boxes) {\n      let o = {\n        object: {\n          name: box.label,\n          pose: \"Unspecified\",\n          truncated: 0,\n          difficult: 0,\n          bndbox: {\n            xmin: box.left,\n            xmax: box.right,\n            ymin: box.top,\n            ymax: box.bottom\n          }\n        }\n      };\n      value.annotation.objects.push(o);\n    }\n\n    await async_func(context, () =>\n      axios.post(utils.build_api_url(\"/api/save_xml_from_label_dict\"), value)\n    );\n\n    context.commit(\"add_tagged_image\", {\n      filename: cur_filename,\n      width: context.state.active_image_width,\n      height: context.state.active_image_height,\n      image: context.state.active_image,\n      boxes: context.state.active_image_tag_boxes\n    });\n\n    // load next image\n    let idx = 0;\n    for (const file of context.state.files) {\n      if (cur_filename === file) {\n        break;\n      }\n      idx += 1;\n    }\n\n    if (idx < context.state.files.length - 1) {\n      idx += 1;\n    } else {\n      idx -= 1;\n    }\n\n    if (idx >= 0) {\n      context.dispatch(\"load_current_image\", context.state.files[idx]);\n    } else {\n      context.commit(\"set_active_image\", {\n        file: null\n      });\n    }\n\n    // Remove image from the list.\n    context.commit(\"remove_image\", {\n      filename: cur_filename\n    });\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/action.js","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport state from \"./state.js\";\nimport mutation from \"./mutation.js\";\nimport action from \"./action.js\";\nimport getters from \"./getters.js\";\n\nVue.use(Vuex);\n\nexport const store_dict = {\n  state: state,\n  actions: action,\n  mutations: mutation,\n  getters: getters\n};\n\nexport const store = new Vuex.Store(store_dict);\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/store.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\nrequire(\"@/css/reset.css\");\nrequire(\"mini.css/dist/mini-default.min.css\");\nrequire(\"font-awesome/css/font-awesome.css\");\nrequire(\"@/css/common.css\");\n\nimport Vue from \"vue\";\nimport App from \"@/App\";\nimport router from \"@/router\";\nimport { store } from \"@/store/store.js\";\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: \"#app\",\n  store,\n  router,\n  components: { App },\n  template: \"<App/>\"\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}